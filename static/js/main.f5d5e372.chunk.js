(this["webpackJsonpreact-socket.io-streaming"]=this["webpackJsonpreact-socket.io-streaming"]||[]).push([[0],{71:function(e,t,a){e.exports=a(93)},76:function(e,t,a){},77:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},78:function(e,t,a){},79:function(e,t,a){},83:function(e,t){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),i=a.n(r),l=(a(76),a(29)),c=(a(77),a(78),a(11)),s=a(49),d=a(31),m=a(24),u=a(140),g=a(58),p=a.n(g),b=a(59),E=a.n(b),h=a(129),f=a(144),y=a(138),v=a(135),j=a(136),k=a(134),w=a(139),C=a(143),O=a(142),x=a(145),I=(a(79),a(80)),S=a(82),A=a(83),B=a(84),N=o.a.forwardRef((function(e,t){return o.a.createElement(h.a,Object.assign({direction:"down",ref:t},e))}));function R(e){return o.a.createElement(h.a,Object.assign({},e,{direction:"up"}))}var T=function(){var e=o.a.useState({create:!1,join:!1}),t=Object(l.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),s=Object(l.a)(i,2),g=s[0],b=s[1],h=Object(n.useState)(""),T=Object(l.a)(h,2),M=T[0],W=T[1],z=Object(c.g)(),J=(Object(c.h)().url,o.a.useState(void 0)),_=Object(l.a)(J,2),D=_[0],F=_[1],V=Object(n.useRef)(null),q=new S;function L(){return q.videosContainer=document.getElementById("videos-container"),console.log(document.getElementById("videos-container")),q.onstream=function(e){var t=document.getElementById(e.streamid);t&&t.parentNode&&t.parentNode.removeChild(t),e.mediaElement.removeAttribute("src"),e.mediaElement.removeAttribute("srcObject"),e.mediaElement.muted=!0,e.mediaElement.volume=0;var a=document.createElement("video");try{a.setAttributeNode(document.createAttribute("autoplay")),a.setAttributeNode(document.createAttribute("playsinline"))}catch(r){a.setAttribute("autoplay",!0),a.setAttribute("playsinline",!0)}if("local"===e.type){a.volume=0;try{a.setAttributeNode(document.createAttribute("muted"))}catch(r){a.setAttribute("muted",!0)}}a.srcObject=e.stream;var n=window.innerWidth-80,o=A(a,{title:e.userid,buttons:["full-screen"],width:n,showOnMouseEnter:!1});q.videosContainer.appendChild(o),setTimeout((function(){o.media.play()}),5e3),o.id=e.streamid},q.onstreamended=function(e){var t=document.getElementById(e.streamid);t&&(t.parentNode.removeChild(t),e.userid!==q.sessionid||q.isInitiator||(alert("Broadcast is ended. We will reload this page to clear the cache."),window.location.reload()))},q.onMediaError=function(e){if("Concurrent mic process limit."===e.message){if(B.audioInputDevices.length<=1)return void alert("Please select external microphone. Check github issue number 483.");var t=B.audioInputDevices[1].deviceId;q.mediaConstraints.audio={deviceId:t},q.join(q.sessionid)}},o.a.createElement("div",{id:"videos-container"})}q.socketURL="https://server-streaming.herokuapp.com/",q.socketMessageEvent="screen-sharing-demo",q.session={screen:!0,oneway:!0},q.iceServers=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}];var P=function(e){return function(t){r(Object(m.a)(Object(m.a)({},a),{},Object(d.a)({},e,!0)))}},U=function(e,t){return function(i){if(r(Object(m.a)(Object(m.a)({},a),{},Object(d.a)({},e,!0))),""!==M)switch(z.push("home/streaming"),e){case"create":q.open(M,(function(){console.log("open room")}));break;case"join":q.sdpConstraints.mandatory={OfferToReceiveAudio:!1,OfferToReceiveVideo:!0},q.join(M);break;default:return o.a.createElement(n.Fragment,null)}else F((function(){return t})),b(!0)}},$=function(e){return function(t){r(Object(m.a)(Object(m.a)({},a),{},Object(d.a)({},e,!1)))}},G=function(e){W(e.target.value)};return Object(n.useEffect)((function(){console.log(window.location.hash.replace("#","")),""!==window.location.hash.replace("#","")&&(W(window.location.hash.replace("#","")),r(Object(m.a)(Object(m.a)({},a),{},{join:!0})))}),[window.location.hash.replace("#","")]),o.a.createElement(c.d,null,o.a.createElement(c.b,{exact:!0,path:"/home"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:" -webkit-fill-available",backgroundColor:"black"}},o.a.createElement("div",{style:{display:"grid"}},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("h1",{style:{color:"#fb4545",fontWeight:900,fontVariant:"all-petite-caps",fontSize:"xxx-large",marginRight:22}},"Live "),o.a.createElement("h1",{style:{color:"aqua",fontWeight:900,fontVariant:"all-petite-caps",fontSize:"xxx-large"}},"Streaming Bata Test")),o.a.createElement("div",{style:{display:"contents"}},o.a.createElement(u.a,{ref:V,size:"large",variant:"contained",style:{backgroundColor:"#000000",color:"white",margin:15},startIcon:o.a.createElement(p.a,null),onClick:P("create")}," Create Streaming")),o.a.createElement("div",{style:{display:"contents"}},o.a.createElement(u.a,{size:"large",variant:"contained",style:{backgroundColor:"#000000",color:"white",margin:15},onClick:P("join"),startIcon:o.a.createElement(E.a,null)},"Join Streaming"))),o.a.createElement(f.a,{open:a.create,TransitionComponent:N,keepMounted:!0,onClose:$,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(k.a,{id:"alert-dialog-slide-title"},"Create key streaming"),o.a.createElement(v.a,null,o.a.createElement(j.a,{id:"alert-dialog-slide-description"},o.a.createElement("div",{style:{display:"grid"}},o.a.createElement(w.a,{id:"key-streaming",label:"key",value:M,onChange:G,style:{width:315}}),o.a.createElement(u.a,{style:{margin:"15px 70px"},variant:"contained",onClick:function(){var e=I._();W(e)},color:"primary"}," generate key")))),o.a.createElement(y.a,null,o.a.createElement(u.a,{onClick:$("create"),color:"primary"},"Close "),o.a.createElement(u.a,{onClick:U("create"),color:"primary"},"Create "))),o.a.createElement(f.a,{open:a.join,TransitionComponent:N,keepMounted:!0,onClose:$,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(k.a,{id:"alert-dialog-slide-title"},"Join key streaming"),o.a.createElement(v.a,null,o.a.createElement(j.a,{id:"alert-dialog-slide-description"},o.a.createElement("div",{style:{display:"grid"}},o.a.createElement(w.a,{id:"key-streaming",label:"key",value:M,onChange:G,style:{width:315}})))),o.a.createElement(y.a,null,o.a.createElement(u.a,{onClick:$("join"),color:"primary"},"Close"),o.a.createElement(u.a,{onClick:U("join",R),color:"primary"},"Join"))),o.a.createElement(C.a,{open:g,onClose:function(){b(!1)},TransitionComponent:D,message:"\u0e44\u0e21\u0e48\u0e21\u0e35 key"}))),o.a.createElement(c.b,{path:"/home/streaming"},o.a.createElement(L,null),o.a.createElement("div",{style:{position:"absolute",top:"8px",display:"flex",width:"-webkit-fill-available",justifyContent:"center",alignItems:"center"}},o.a.createElement("h3",{style:{marginRight:10}},"Share: "),o.a.createElement(O.a,{url:"/home#".concat(M),quote:"Facebook",className:"Demo__some-network__share-button"},o.a.createElement(x.a,{size:32,round:!0})))))};function M(e){switch(e.status){case!0:return o.a.createElement(c.d,null,o.a.createElement(c.a,{exact:!0,from:"/",to:"/home"}),o.a.createElement(c.b,{to:"/home"},o.a.createElement(T,null)));case!1:return o.a.createElement(c.d,null,o.a.createElement(c.a,{exact:!0,from:"/",to:"/login"}),o.a.createElement(c.b,{path:"/login"}));default:return o.a.createElement(n.Fragment,null)}}var W=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0];return t[1],o.a.createElement(s.a,null,o.a.createElement(M,{status:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.f5d5e372.chunk.js.map